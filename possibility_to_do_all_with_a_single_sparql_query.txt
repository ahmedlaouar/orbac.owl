I have the following sparql query:
ASK {{
  :{member1} :isPreferredTo :{member2} .
  FILTER NOT EXISTS {{
    :{member2} :isPreferredTo :{member1} .
  }}
}}
The query checks if member1 is stricly preferred to member2. I want to extend the query so it checks for 2 sets, if each element of the first set 'a' has at least one element from the second set 'b' such that :a is preferred to :b and :b is not preferred to a

ASK {
  # Assuming sets 'a' and 'b' are represented as RDF collections
  # Replace 'SET_A_URI' and 'SET_B_URI' with the URIs of your collections
  {
    SELECT ?a WHERE {
      :SET_A_URI rdf:rest*/rdf:first ?a .
    }
  }
  FILTER EXISTS {
    ?a :isPreferredTo ?b .
    FILTER NOT EXISTS {
      ?b :isPreferredTo ?a .
    }
    :SET_B_URI rdf:rest*/rdf:first ?b .
  }
  FILTER NOT EXISTS {
    {
      SELECT ?a WHERE {
        :SET_A_URI rdf:rest*/rdf:first ?a .
      }
    }
    FILTER NOT EXISTS {
      ?a :isPreferredTo ?b .
      FILTER NOT EXISTS {
        ?b :isPreferredTo ?a .
      }
      :SET_B_URI rdf:rest*/rdf:first ?b .
    }
  }
}

